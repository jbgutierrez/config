#!/bin/bash
# This script lets your create/edit scripts based on pre-cooked templates

TEMPLATES_DIR="$HOME/.vim/templates"
name="$1"
[[ $name ]] || { echo "Missing script name. Please run create_script name [template]" >&2; exit 1; }

filename="$HOME/.bin/$name"
if [[ -e $filename ]]; then
  read -r -s -n 1 -p "WARNING: File $filename already exists (press any key to continue) "
else
  template="$2"
  [[ $template ]] || template=sh
  type "$name" > /dev/null 2>&1 && { echo "There is already a command with name $name" >&2; exit 1; }
  [[ -e "$TEMPLATES_DIR/$template.tpl" ]] || { echo "There's no template for $template at $TEMPLATES_DIR/$template.tpl" >&2; exit 1; }
  cp "$TEMPLATES_DIR/$template.tpl" "$filename"
  chmod u+x "$filename"
fi

$EDITOR "$filename"

exit 0
