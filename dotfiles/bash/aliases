# Utility
alias reload='source ~/bin/dotfiles/bash/aliases'
alias ea='gvim -f ~/bin/dotfiles/bash/aliases && reload' # Edit aliases
alias ee='gvim ~/bin/dotfiles/bash/env'

# Processes
alias tu='top -o cpu' # cpu
alias tm='top -o vsize' # memory

# GIT aliases
alias gk='gitk --all'
alias gkr='gitk --all `git reflog | cut -c1-7`'
alias gst='git status'
alias gl='git pull'
alias gp='git push'
alias gd='git diff'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gcsvn='git svn dcommit'
alias ga='git commit -v --amend'
alias gaa='git commit -v -a --amend'
alias gb='git branch --color'
alias gbd='git branch -d'
function gbc(){
  git checkout -b $1 2> /dev/null || git checkout $1
}
alias gadd='git add -i'
alias glog='git log --pretty=format:"%ar - %an - %s"'
alias gapply='git stash apply && git stash clear'
alias gresolve='git add -u && git rebase --continue'
function garchive() {
  git archive master | bzip2 >source-tree.tar.bz2 
}
# Git clone from GitHub
function gclone() {
  git clone git://github.com/$1/$2.git
}

#heroku helpers
alias hp="git push heroku master"
alias hl="heroku logs"

# Bash commands
alias less='less -r'
alias la='ls -lhGta'
alias l='ls -lhGt'  # -l long listing, most recent first
                    # -G color
alias cp='cp -i'
alias mv='mv -i'
alias rm='rm -i'
alias df='df -h'
alias h='history'
alias md='mkdir -p'
function cdh(){
  cd "$HOME/$1"
}
alias cls='clear'
alias ..='cd ..'   # up one dir
alias cd..='cd ..'   # up one dir
alias cdl='cd -'  # goto last dir cd'ed from
alias cdd='cd -'  # goto last dir cd'ed from
function take() { 
  mkdir -p "$1"
  cd "$1" 
}
alias q='exit'
function killnamed () { 
  ps ax | grep $1 | cut -d ' ' -f 2 | xargs kill 
}
function zipr() {
  zip -r $1.zip $1
}

function zip2bzip(){
  cat $1 | gunzip | bzip2 !#:1:s/gz/bz2
}

# Finder
alias o='open . &'
alias ff='open -a Firefox'

# Recursively Remove .DS_Store files in OS X
alias clean='find . -name *.DS_Store -type f -exec rm {} \;'

# Update Text Bundles
alias update_bundles='svn update ~/Library/Application\ Support/TextMate/Bundles'

# Shortcuts to each project folder
# alias cdprojects="cd $PROJECTS_FOLDER"
# for path in $PROJECTS_FOLDER/*; do
#   if [ -d $path ]; then
#     subfolder=`echo $path | /usr/bin/sed 's/.*\///'`
#     alias "cd$subfolder"="cd $path"
#     alias "e$subfolder"="gvim $path"
#   fi
# done

# Ruby
alias r="rake"
# Puts you in a 1.9 sandbox
# alias ruby19="export PATH=/opt/ruby19/bin:$PATH"

# Remember path position
export REMEMBERME_PATH=$HOME
alias rememberme='export REMEMBERME_PATH=$PWD'
alias cdrememberme='cd "$REMEMBERME_PATH"'

# Instant web sharing via webrick
alias webshare='ruby -e "require\"webrick\";w=WEBrick::HTTPServer.new(:Port=>8000,:DocumentRoot=>Dir::pwd);Signal.trap(2){w.shutdown};w.start"'
alias g='gvim --remote-silent'

# Rails
alias sc='./script/console'
alias sg='./script/generate'
alias sp='./script/plugin'
alias ss='./script/server'
alias tl='tail -f log/*.log'

# TDD / BDD
alias at='autotest'
alias aaf='autotest -f' # Don't run all at start
alias as="autospec"

# Social activity
function tweet(){
  curl -u user:pass http://twitter.com/statuses/update.xml -d status="$*"
}

# Cygwin customizations and walkarounds
if [ $_YAP_CYGWIN ]; then
  # Shortcuts to each project folder
  alias cdprojects="cd $PROJECTS_FOLDER"
  for path in $PROJECTS_FOLDER/*; do
    if [ -d $path ]; then
      subfolder=`echo $path | sed 's/.*\///' | tr "[:upper:]" "[:lower:]"`
      alias "cd$subfolder"="cd $path/Software/trunk"
      alias "e$subfolder"="e $path/Software/trunk"
      alias "u$subfolder"="cd $path/Software/trunk && git svn rebase && cd -"
      alias "o$subfolder"='"/cygdrive/c/Archivos de programa/Microsoft Visual Studio 8/Common7/IDE/devenv.exe" "D:/Proyectos/$subfolder/Software/trunk/$ subfolder.sln"&'
    fi
  done

  # Cygwin walkarounds
  alias rake='C:/ruby/bin/rake'
  alias gem='C:/ruby/bin/gem'
  alias gvim='gvim.bat'
  alias reload='cd && source bin/dotfiles/bash/aliases && cd -'
  alias ea='cd && gvim -f bin/dotfiles/bash/aliases && reload && cd -' # Edit aliases
  alias ee='cd && gvim bin/dotfiles/bash/env && cd -'
fi
